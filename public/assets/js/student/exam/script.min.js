$(document).ready(function(){var t=$(".question-list"),n=($(".question-list .question-item"),1e3*$(".question-list").data("timer")),e=0;function i(){var t=$(".question-list .question-item"),i=$(t[e]);$(".timer-length").css({background:"#4DC978",width:"100%"}),$(i).find(".btn-next").addClass("btn-next-disabled").prop("disabled",!0),$(i).find(".answer-input").css({"border-bottom-color":"#A6D1FF"}).focus().val("").removeAttr("readonly"),$(i).find(".notification-success").css({display:"none"}),$(i).find(".notification-failed").css({display:"none"}),$(".timer-length").css({background:"#4DC978",width:"100%"}),$(".timer-length").animate({width:"0%"},n,function(){a()})}function a(){var n=$(".question-list .question-item"),i=$(n[e]),a=$(".question-list").data("check");$(i).find(".answer-input").attr("readonly",!0),$(i).find(".btn-next").addClass("btn-next-disabled").prop("disabled",!0),$.ajax({type:"POST",url:a,data:{_token:$('input[name="_token"]').val(),id:$(i).data("id"),task_id:$(".question-list").data("task"),answer:$(i).find(".answer-input").val(),repeatance:$(i).find(".answer-input").data("status")},dataType:"JSON",success:function(n){var i;!0===n.status?(i=$(".question-list .question-item"),$(i[e]).find(".notification-success").css({display:"block"}),$(i[e]).find(".answer-input").attr("data-status","true"),setTimeout(()=>{e<i.length-1?s():o()},1e3)):function(n){var i=$(".question-list .question-item"),a=$(i[e]);$(".timer-length").css({background:"#FF4343"}),$(a).find(".answer-input").css({"border-bottom-color":"#FF4343"}),$(a).find(".notification-failed").css({display:"block"}),$(a).find(".seharusnya").css({display:"block"}).text(n),setTimeout(()=>{$(a).data("repeatance");var n=$(".question-list .question-item").last().data("repeatance");if(n<2){t.append(a.clone(!1));var e=$(".question-list .question-item").last(),i=$(e).data("repeatance");$(e).attr("data-repeatance",i+1).css({display:"none"}),$(e).find(".answer-input").removeAttr("name"),$(e).find(".answer-input").attr("data-status",!0),i+1>2&&$(e).remove()}s()},1e3)}(n.answer)}})}function s(){var t=$(".question-list .question-item");e<t.length-1?($(t[e]).css({display:"none"}),e+=1,$(t[e]).css({display:"block"}),$(".number").text($(t[e]).data("number")),i()):o()}function o(){var t=$("#question-list");$(t).prepend('<input class="d-none" name="_token" value="'+$('input[name="_token"]').val()+'">'),console.log(t.html()),$(t).submit()}i(),$("body").on("keyup",".answer-input",function(t){var n=$(this).parents(".question-item").find(".btn-next");13!==t.which&&(""!=$(this).val()?$(n).removeClass("btn-next-disabled").prop("disabled",!1):$(n).addClass("btn-next-disabled").prop("disabled",!0))}),$("body").on("keyup",".answer-input",function(t){13===t.which&&($(this).parents(".question-item").find(".btn-next").click(),$(this).parents(".question-item").find(".btn-next").prop("disabled",!0))}),$("body").on("click",".btn-next",function(){$(this).prop("disabled",!0),$(".timer-length").stop(),a()}),$("#exitExamModal").on("show.bs.modal",t=>{$(".timer-length").stop()}),$("#exitExamModal").on("hide.bs.modal",t=>{$(".timer-length").animate({width:"0%"},n,function(){a()})}),$(document).on("keydown",function(t){(t=t||window.event).ctrlKey?82==(t.which||t.keyCode)&&(t.preventDefault(),t.stopPropagation(),$("#exitExamModal").modal("show")):116===t.which&&(t.preventDefault(),$("#exitExamModal").modal("show"))})});